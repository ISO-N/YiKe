# 忆刻 (YiKe) v3.0 UI/UX 设计规范

## 概述

本文档基于 ui-ux-pro-max 设计智能分析，定义忆刻 v3.0 版本（学习指南内嵌、Windows 桌面端、局域网数据同步）的 UI/UX 设计规范。

---

## 一、设计系统概览

### 1.1 产品定位

| 属性 | 值 |
|------|-----|
| 产品类型 | 教育类学习工具 (Education Learning App) |
| 目标用户 | 终身学习者、学生、备考人群 |
| 平台 | Android / iOS（已发布） / Windows（规划中） |
| 核心价值 | 基于艾宾浩斯遗忘曲线的科学记忆工具 |

### 1.2 设计原则

1. **清晰优先**：信息层次分明，关键操作显眼
2. **高效交互**：减少操作步骤，快速完成任务
3. **一致性**：跨平台、跨页面体验一致
4. **反馈及时**：所有操作都有明确的状态反馈
5. **可访问性**：遵循 WCAG AA 标准

---

## 二、移动端设计规范（Android / iOS）

### 2.1 视觉风格

#### 风格定义：Modern Education（现代教育风格）

- **关键词**：简洁、专业、专注、可信
- **特征**：圆角卡片、柔和阴影、清晰的信息层次
- **适用页面**：帮助页、首页、日历、统计

#### 配色方案

| 角色 | 颜色名称 | Hex | 用途 |
|------|----------|-----|------|
| Primary | Teal 600 | #0D9488 | 主按钮、选中状态、强调 |
| Primary Light | Teal 500 | #14B8A6 | hover 状态、进度条 |
| Secondary | Slate 600 | #475569 | 次要文字、图标 |
| Background | Teal 50 | #F0FDFA | 页面背景 |
| Surface | White | #FFFFFF | 卡片、弹窗背景 |
| Text Primary | Slate 900 | #0F172A | 标题、正文 |
| Text Secondary | Slate 500 | #64748B | 描述、提示 |
| Success | Green 500 | #22C55E | 完成状态、成功提示 |
| Warning | Amber 500 | #F59E0B | 警告、逾期提示 |
| Error | Red 500 | #EF4444 | 错误状态 |
| Border | Glass | rgba(255,255,255,0.4) | 毛玻璃边框 |

#### 深色模式配色

| 角色 | 颜色名称 | Hex | 用途 |
|------|----------|-----|------|
| Background | Deep Blue | #1A1A2E | 页面背景 |
| Surface | Navy | #16213E | 卡片、弹窗 |
| Primary | Teal 500 | #14B8A6 | 主按钮、强调（沿用现有实现） |
| Text Primary | Slate 100 | #F1F5F9 | 标题、正文 |
| Text Secondary | Slate 400 | #94A3B8 | 描述、提示 |

### 2.2 字体排版

#### 字体选择

| 用途 | 字体 | 字重 | 大小 | 行高 |
|------|------|------|------|------|
| 页面标题 | System Default | 700 (Bold) | 24sp | 1.3 |
| 卡片标题 | System Default | 600 (SemiBold) | 18sp | 1.4 |
| 正文 | System Default | 400 (Regular) | 16sp | 1.6 |
| 描述 | System Default | 400 (Regular) | 14sp | 1.5 |
| 按钮 | System Default | 500 (Medium) | 16sp | 1.0 |
| 标签 | System Default | 500 (Medium) | 12sp | 1.4 |

#### 字体使用规则

- **中文**：使用系统默认字体（Android: Noto Sans / iOS: PingFang）
- **英文/数字**：使用系统默认字体
- **代码/特殊**：等宽字体（如有需要）

### 2.3 间距系统

#### 基础间距

| 名称 | 值 | 用途 |
|------|-----|------|
| xs | 4px | 标签内间距、图标与文字间隙 |
| sm | 8px | 紧凑元素间距 |
| md | 16px | 标准间距、卡片内边距 |
| lg | 24px | 区块间距 |
| xl | 32px | 页面边距 |
| xxl | 48px | 大区块间距 |

#### 卡片内边距

-卡片 标准：`16px`（移动端）
- 大卡片：`24px`（平板/桌面端）

### 2.4 组件规范

#### 按钮

| 类型 | 背景色 | 文字色 | 圆角 | 高度 |
|------|--------|--------|------|------|
| 主按钮 | Primary (#0D9488) | White | 12px | 48px |
| 次按钮 | Transparent | Primary | 12px | 48px |
| 文字按钮 | Transparent | Primary | - | 36px |
| 禁用 | #E2E8F0 | #94A3B8 | 12px | 48px |

#### 卡片（Glass Card）

```
移动端：
├── 背景：rgba(255, 255, 255, 0.85)
├── 边框：1px solid rgba(255, 255, 255, 0.4)
├── 圆角：16px
├── 阴影：0 4px 24px rgba(0, 0, 0, 0.08)
└── 内边距：16px

深色模式：
├── 背景：rgba(22, 33, 62, 0.85)
├── 边框：1px solid rgba(255, 255, 255, 0.1)
└── 阴影：0 4px 24px rgba(0, 0, 0, 0.3)
```

#### 底部导航栏

| 属性 | 值 |
|------|-----|
| 高度 | 80px（含安全区） |
| 图标大小 | 24px |
| 文字大小 | 12sp |
| 选中颜色 | Primary (#0D9488) |
| 未选中颜色 | Slate 400 (#94A3B8) |
| 背景 | Surface + 模糊效果 |

---

## 三、帮助页设计（F10）

### 3.1 页面结构

```
┌─────────────────────────────────┐
│  ← 返回        忆刻学习指南      │  ← AppBar
├─────────────────────────────────┤
│                                 │
│  🧠 忆刻学习指南                │  ← 顶部 Hero
│     科学学习方法，让记忆更牢固   │
│                                 │
├─────────────────────────────────┤
│  📖 目录                        │  ← 目录可点击
│  ├── 为什么你需要「忆刻」？      │
│  ├── 原理一：艾宾浩斯遗忘曲线   │
│  ├── 原理二：主动检索           │
│  ├── 原理三：必要难度法则       │
│  ├── 忆刻使用建议               │
│  └── 常见问题                   │
├─────────────────────────────────┤
│                                 │
│  内容区域（可滚动）              │
│  └── Markdown 渲染内容          │
│                                 │
│  [表格]  [列表]  [引用块]       │
│                                 │
├─────────────────────────────────┤
│  ─────────────────────────────  │  ← 分割线
│  v1.0.0 · 忆刻团队              │  ← 底部版本信息
└─────────────────────────────────┘
```

### 3.2 交互规范

| 交互 | 行为 |
|------|------|
| 点击目录项 | 平滑滚动到对应章节 |
| 上滑/下滑 | 内容区域滚动 |
| 点击顶部返回 | 返回上一页面 |
| 深色/浅色切换 | 整个页面颜色同步变化 |

### 3.3 无障碍规范

- [ ] 所有图片提供 alt 文字
- [ ] 标题层级正确（H1 > H2 > H3）
- [ ] 目录项可使用键盘/手势导航
- [ ] 颜色对比度 ≥ 4.5:1
- [ ] 支持屏幕阅读器

---

## 四、Windows 桌面端设计规范（F11）

### 4.1 窗口规范

#### 窗口配置

| 属性 | 值 |
|------|-----|
| 默认宽度 | 1200px |
| 默认高度 | 800px |
| 最小宽度 | 800px |
| 最小高度 | 600px |
| 窗口标题 | 忆刻 - {当前页面} |
| 窗口图标 | 应用 Logo |

#### 自定义标题栏

```
┌─────────────────────────────────────────────────────────────────┐
│ ─ □ ✕ │   忆刻 - 今日复习                    🔄 │  ← 标题栏 (32px)
├─────────────────────────────────────────────────────────────────┤
│                                                             │
│  [今日复习] [日历] [统计] [帮助] [设置]     [🔔] [👤]        │  ← 导航栏 (56px)
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  内容区域                                                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 标题栏按钮

| 按钮 | 图标 | 功能 | 悬停背景 |
|------|------|------|----------|
| 最小化 | ─ | 最小化到任务栏/托盘 | #E2E8F0 / #374151 |
| 最大化 | □ / ❐ | 切换最大化状态 | #E2E8F0 / #374151 |
| 关闭 | ✕ | 关闭应用 | #EF4444 / #DC2626 |

### 4.2 导航设计

#### 底部导航（保持一致）

```
┌─────────────────────────────────────────────────────────────────┐
│  [🏠 首页]  [📅 日历]  [📊 统计]  [❓ 帮助]  [⚙️ 设置]         │
└─────────────────────────────────────────────────────────────────┘
```

#### 桌面端优化

| 特性 | 实现 |
|------|------|
| 快捷键 | Ctrl+N 新建 / Ctrl+R 刷新 / Ctrl+, 设置 / Ctrl+H 帮助 |
| 鼠标悬停 | 按钮/卡片悬停效果 |
| 右键菜单 | 支持右键上下文菜单 |

### 4.3 响应式布局

#### 断点定义

| 断点 | 宽度 | 布局 |
|------|------|------|
| Mobile | < 600px | 单列、底部导航 |
| Tablet | 600-1199px | 单列/双列、底部导航 |
| Desktop | ≥ 1200px | 双列/三列、侧边栏可选 |

#### 任务列表双列布局（桌面端）

```
┌─────────────────────────────────────────────────────────────────┐
│  今日进度                         🔄 同步中 · 已连接 3 台设备   │
│  ████████████░░░░░░░  12/20                                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────────┐    ┌──────────────────┐                  │
│  │ 📝 求导公式掌握   │    │ 📝 英语单词背诵   │                  │
│  │ 第3次 · 今日待复习│    │ 第1次 · 今日待复习│                  │
│  │ [标签1] [标签2]   │    │ [标签3]          │                  │
│  │         ✓ 跳过   │    │         ✓ 跳过   │                  │
│  └──────────────────┘    └──────────────────┘                  │
│                                                                 │
│  ┌──────────────────┐    ┌──────────────────┐                  │
│  │ 📝 历史事件记忆   │    │ 📝 公式推导练习   │                  │
│  │ 第2次 · 逾期1天  │    │ 第1次 · 今日待复习│                  │
│  │ [标签4] [标签5]   │    │ [标签6]          │                  │
│  │         ✓ 跳过   │    │         ✓ 跳过   │                  │
│  └──────────────────┘    └──────────────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.4 托盘设计

#### 托盘图标

| 状态 | 图标 | 说明 |
|------|------|------|
| 正常 | 绿色忆刻 Logo | 应用正常运行 |
| 同步中 | 带箭头的 Logo | 正在同步数据 |
| 离线 | 灰色 Logo | 未连接网络 |

#### 托盘菜单

```
┌─────────────────┐
│ 忆刻            │
├─────────────────┤
│  显示主窗口     │
│  ───────────── │
│  今日复习 (5)   │
│  同步状态: 已连接│
│  ───────────── │
│  退出          │
└─────────────────┘
```

---

## 五、同步状态设计（F12）

### 5.1 状态定义

| 状态 | 图标 | 颜色 | 描述 |
|------|------|------|------|
| 未连接 | ○ 空心圆 | Slate 400 | 未发现或未配对设备 |
| 连接中 | ↻ 旋转 | Blue 500 | 正在发现/连接设备 |
| 已连接 | ● 实心圆 | Green 500 | 已配对且在线 |
| 同步中 | ↻ 旋转+云 | Blue 500 | 正在同步数据 |
| 同步完成 | ✓ 对勾 | Green 500 | 同步成功 |
| 同步失败 | ✕ 叉 | Red 500 | 同步失败 |
| 离线 | ○ 带斜杠 | Slate 400 | 网络不可用 |

### 5.2 状态展示位置

#### 首页顶部状态栏

```
┌─────────────────────────────────────────────────────────────────┐
│  🔄 同步中 · 已连接「办公电脑」                    │
├─────────────────────────────────────────────────────────────────┤
```

#### 设置页同步区块

```
┌─────────────────────────────────────────────────────────────────┐
│  🔌 同步设置                                                  │
├─────────────────────────────────────────────────────────────────┤
│  [开启自动同步]  ──────────────────────────────  [ON]         │
│                                                                 │
│  Wi-Fi 下自动同步    ─────────────────────────────  [ON]     │
│                                                                 │
│  已连接的设备                                                │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │ 📱 Android - 我的手机              已连接    [断开]     │  │
│  │ 💻 Windows - 办公电脑             已连接    [断开]     │  │
│  └─────────────────────────────────────────────────────────┘  │
│                                                                 │
│  手动同步                                    [立即同步]        │
└─────────────────────────────────────────────────────────────────┘
```

### 5.3 交互反馈

| 操作 | 反馈 |
|------|------|
| 开启自动同步 | Toast: "已开启自动同步" |
| 点击立即同步 | 按钮显示加载状态，完成后 Toast: "同步完成" |
| 配对成功 | Dialog: "配对成功"，设备加入列表 |
| 同步失败 | Toast: "同步失败，请检查网络"，显示重试按钮 |
| 断开连接 | Confirm Dialog 确认，Toast: "已断开连接" |

---

## 六、组件状态规范

### 6.1 加载状态

| 场景 | 方案 | 时长 |
|------|------|------|
| 页面加载 | Skeleton 占位 | > 300ms |
| 按钮点击 | 禁用 + Loading | 异步操作 |
| 下拉刷新 | RefreshIndicator | - |
| 同步中 | 顶部状态栏 + 托盘图标 | - |

### 6.2 空状态

| 场景 | 展示 |
|------|------|
| 今日无任务 | 插画 + "今天没有待复习任务" |
| 无连接设备 | "未发现附近设备" + 刷新按钮 |
| 无学习内容 | 插画 + "开始添加第一个学习内容" |

### 6.3 错误状态

| 场景 | 展示 |
|------|------|
| 加载失败 | 错误提示 + 重试按钮 |
| 同步失败 | 红色提示 + 错误详情 + 重试 |
| 网络断开 | 灰色状态栏 + "离线模式" |

---

## 七、深色模式适配

### 7.1 颜色映射

| 元素 | 浅色模式 | 深色模式 |
|------|----------|----------|
| 背景 | #F0FDFA | #1A1A2E |
| 卡片背景 | #FFFFFF | #16213E |
| 主文字 | #0F172A | #F1F5F9 |
| 次文字 | #64748B | #94A3B8 |
| 主按钮 | #0D9488 | #14B8A6（沿用现有实现） |
| 边框 | rgba(255,255,255,0.4) | rgba(255,255,255,0.1) |

### 7.2 适配要求

- [ ] 所有页面支持深色/浅色自动切换
- [ ] 手动切换后持久化存储
- [ ] 跟随系统时自动响应系统主题变化
- [ ] 深色模式下对比度 ≥ 4.5:1

---

## 八、响应式布局断点

### 8.1 Flutter 断点实现

```dart
// 断点常量
const double kMobileBreakpoint = 600;
const double kTabletBreakpoint = 900;
const double kDesktopBreakpoint = 1200;

// 响应式布局构建器
Widget buildResponsiveLayout(BuildContext context) {
  final width = MediaQuery.of(context).size.width;

  if (width >= kDesktopBreakpoint) {
    return DesktopLayout(); // 双列/三列
  } else if (width >= kTabletBreakpoint) {
    return TabletLayout(); // 可选双列
  } else {
    return MobileLayout(); // 单列
  }
}
```

### 8.2 布局规范

| 断点 | 任务卡片 | 侧边栏 | 导航 |
|------|----------|--------|------|
| < 600px | 单列 | 无 | 底部导航 |
| 600-899px | 单列/双列 | 无 | 底部导航 |
| 900-1199px | 双列 | 可选 | 底部导航 |
| ≥ 1200px | 双列/三列 | 可选 | 底部导航 |

---

## 九、动画规范

### 9.1 过渡时长

| 场景 | 时长 | 缓动函数 |
|------|------|----------|
| 页面切换 | 300ms | ease-in-out |
| 按钮点击 | 150ms | ease-out |
| 卡片悬停 | 200ms | ease-out |
| 弹窗显示 | 250ms | ease-out |
| 列表项 | 200ms | ease-out |

### 9.2 动画实现

- 使用 Flutter 内置 `AnimatedContainer`、`AnimatedOpacity`
- 自定义动画使用 `AnimationController`
- 尊重 `prefers-reduced-motion` 系统设置

---

## 十、可访问性规范

### 10.1 基础要求

| 要求 | 标准 |
|------|------|
| 颜色对比度 | 4.5:1（普通文本）/ 3:1（大文本） |
| 触摸目标 | ≥ 44x44px |
| 焦点状态 | 可见焦点指示器 |
| 屏幕阅读器 | 所有交互元素有语义标签 |

### 10.2 Flutter 实现

```dart
// 语义标签
Semantics(
  label: '完成复习任务',
  button: true,
  child: IconButton(...),
)

// 焦点管理
Focus(
  autofocus: true,
  child: TextField(...),
)

// 屏幕阅读器支持
Text('今日已完成 5/10', semanticsLabel: '今日已完成 5 项，共 10 项')
```

---

## 十一、验收检查清单

### 11.1 移动端

- [ ] 帮助页目录可点击跳转
- [ ] Markdown 内容渲染正确（标题、列表、表格、代码块）
- [ ] 深色/浅色主题正常切换
- [ ] 底部 5 个 Tab 正常切换
- [ ] 触摸目标 ≥ 44px

### 11.2 桌面端

- [ ] 窗口默认大小 1200x800
- [ ] 最小化/最大化/关闭按钮正常
- [ ] 最小化到托盘功能正常
- [ ] 任务列表双列布局（≥ 1200px）
- [ ] 快捷键 Ctrl+N / Ctrl+R 正常
- [ ] 托盘菜单功能正常

### 11.3 同步功能

- [ ] 同步状态正确显示
- [ ] 连接/断开设备正常
- [ ] 同步失败有错误提示
- [ ] 自动同步开关正常

### 11.4 全局

- [ ] 深色模式对比度达标
- [ ] 动画流畅（60fps）
- [ ] 无控制台错误
- [ ] 横竖屏适配正常

---

*本文档基于 ui-ux-pro-max 设计智能分析产出，结合忆刻产品特性定制。*
