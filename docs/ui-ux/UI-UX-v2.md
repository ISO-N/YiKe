# 忆刻 (YiKe) — UI/UX 设计稿 v2.0

> **版本范围声明**：本文档对应 PRD v2.0 版本，包含 F6 日历视图、F7 学习统计、F8 数据导出三个功能的页面与组件设计。
> **继承说明**：本设计继承 v1.0 的 Glassmorphism 毛玻璃设计风格，配色方案、字体、间距系统保持一致。

## 0. PRD 功能点覆盖矩阵

| PRD 编号 | 功能描述 | v2.0 范围 | 本文档对应章节 |
|----------|----------|-----------|----------------|
| **F6** | 日历视图 | ✅ **做** | 3.3 日历视图 |
| **F7** | 学习统计 | ✅ **做** | 3.4 统计面板 |
| **F8** | 数据导出与备份 | ✅ **做** | 3.5 数据导出 |

### 版本差异说明

| 差异点 | v1 描述 | v2 实现 | 处理方式 |
|--------|---------|---------|----------|
| 日历视图 | v1.1 规划 | 新增 Tab 页面 | v2 实现 |
| 统计面板 | v2.0 规划 | 新增 Tab 页面 | v2 实现 |
| 数据导出 | v2.0 规划 | 设置页入口 | v2 实现 |
| 底部导航 | 2 个 Tab | 4 个 Tab | 新增日历、统计 Tab |

---

## 1. 设计体系（继承 v1.0）

### 1.1 视觉风格

| 属性 | 值 |
|------|-----|
| **风格** | Glassmorphism（毛玻璃） |
| **关键词** | 透明、模糊背景、层次感、质感、现代 |
| **适用场景** | 卡片、弹窗、导航栏、背景层叠 |

### 1.2 配色方案（继承 v1.0）

| 角色 | 颜色名称 | Hex 值 | 使用场景 |
|------|----------|--------|----------|
| **Primary** | Teal 600 | `#0D9488` | 主按钮、Tab 选中态、强调文字 |
| **Primary Light** | Teal 500 | `#14B8A6` | 渐变起始色、hover 态 |
| **Success** | Green 500 | `#22C55E` | 完成状态、勾选选中 |
| **Warning** | Amber 500 | `#F59E0B` | 逾期提醒 |
| **Error** | Red 500 | `#EF4444` | 错误状态、删除操作 |
| **Background** | Teal 50 | `#F0FDFA` | 页面主背景 |
| **Text Primary** | Slate 900 | `#0F172A` | 正文、标题 |
| **Text Secondary** | Slate 500 | `#64748B` | 辅助文字 |

### 1.3 间距系统 (8pt Grid)

继承 v1.0 间距系统：xs(4px) / sm(8px) / md(16px) / lg(24px) / xl(32px) / xxl(48px)

---

## 2. 导航结构

### 2.1 底部导航栏（新增 Tab）

```
┌─────────────────────────────────────────┐
│                                         │
│              页面内容                    │
│                                         │
├─────────────────────────────────────────┤
│  📖 今日    │  📅 日历   │  📊 统计   │  ⚙️ 设置  │
│  Home      │  Calendar  │  Statistics │  Settings │
└─────────────────────────────────────────┘
```

**导航规范：**

| Tab | 图标 | 选中态 | 未选中态 |
|-----|------|--------|----------|
| 今日 | `Icons.today` | Primary 颜色 | Text Secondary |
| 日历 | `Icons.calendar_month` | Primary 颜色 | Text Secondary |
| 统计 | `Icons.bar_chart` | Primary 颜色 | Text Secondary |
| 设置 | `Icons.settings` | Primary 颜色 | Text Secondary |

**新增 Tab 页面：**
- `/calendar` - 日历视图
- `/statistics` - 学习统计

---

## 3. 页面设计

### 3.1 首页 — 今日任务（v1.0，保留）

> 详细设计见 `UI-UX-v1.md` 3.1 节

**布局结构：**
```
┌─────────────────────────────────┐
│  🗓 2025年2月25日  周二        │ ← 顶部日期栏
├─────────────────────────────────┤
│  📖 今日复习     3/5 已完成     │ ← 进度卡片
├─────────────────────────────────┤
│  ☑️ Java 集合框架 (第2次)      │
│  ⬜ Spring IoC 原理 (第1次)     │
│  ⬜ MySQL 索引优化 (第3次)      │
│                                 │
│  [+ 录入新学习内容]             │ ← 底部浮动按钮
└─────────────────────────────────┘
```

---

### 3.2 录入页（v1.0，保留）

> 详细设计见 `UI-UX-v1.md` 3.2 节

---

### 3.3 日历视图（新增 F6）

**路由：** `/calendar`

**布局结构：**
```
┌─────────────────────────────────┐
│  <  2025年2月  >               │ ← 月份切换 Header
├─────────────────────────────────┤
│  一   二   三   四   五   六   日│
│                  1    2    3   │
│   4    5    6    7    8    9   │
│  10   11   12  [13]  14   15   │ ← 今日带圆圈标记
│  16   17   18   19   20   21   │
│  22   23   24   25   26   27   │
│  28                            │
├─────────────────────────────────┤
│  今日 - 3 条任务               │ ← 选中日期信息
├─────────────────────────────────┤
│  ☑️ Java 集合框架（第2次）✅   │
│  ⬜ Spring IoC 原理（第1次）   │
│  ⬜ MySQL 索引优化（第3次）    │
└─────────────────────────────────┘
```

**日历单元格规范：**

| 状态 | 样式 |
|------|------|
| **无任务** | 白色背景，无标记 |
| **有任务-待复习** | Primary 圆点 `#0D9488` (Teal) |
| **有任务-已完成** | Success 圆点 `#22C55E` (Green) |
| **有任务-逾期** | Warning 圆点 `#F59E0B` (Amber) |
| **今日** | Primary 圆圈边框 |
| **选中** | Primary/20% 背景 |

> **多状态优先级规则**：当日历单元格同时存在多种状态时，按以下优先级显示单一圆点：
> 1. **逾期 (Warning)** > 2. **待复习 (Primary)** > 3. **已完成 (Success)**

**气泡标记（日期下方）：**
```
┌─────────────────────────────┐
│          [13]                │  ← 日期数字
│           ●                  │  ← 状态圆点（4x4px）
└─────────────────────────────┘
```

**交互规范：**
- 点击月份箭头 → 切换月份，数据懒加载
- 点击日期 → 更新下方任务列表，底部 sheet 展示详情
- 滑动月份 → 支持左右滑动切换（可选）
- 底部任务列表 → 点击任务跳转首页详情或直接完成

**空状态：**
```
┌─────────────────────────────────┐
│                                 │
│           📅                    │
│                                 │
│      本月暂无学习记录            │
│                                 │
│   点击底部按钮开始学习吧         │
│                                 │
└─────────────────────────────────┘
```

---

### 3.4 统计面板（新增 F7）

**路由：** `/statistics`

**布局结构：**
```
┌─────────────────────────────────┐
│         📊 学习统计              │ ← 页面标题
├─────────────────────────────────┤
│  🔥 连续打卡                    │
│  ┌─────────────────────────┐   │
│  │      📅 12 天           │   │ ← 打卡天数大字
│  │   今日已完成，继续保持！  │   │ ← 鼓励文案
│  └─────────────────────────┘   │
├─────────────────────────────────┤
│  📈 本周完成率    📈 本月完成率  │
│  ┌───────────┐ ┌───────────┐   │
│  │   80%     │ │   75%     │   │ ← 环形进度
│  │  4/5      │ │  15/20    │   │
│  └───────────┘ └───────────┘   │
├─────────────────────────────────┤
│  📊 分类占比                    │
│  ┌─────────────────────────┐   │
│  │        ┌─────┐          │   │
│  │       /       \         │   │
│  │      │  饼图   │        │   │ ← 标签分布饼图
│  │       \       /         │   │
│  │        └─────┘          │   │
│  │  Java    Spring   MySQL │   │
│  └─────────────────────────┘   │
├─────────────────────────────────┤
│  📅 学习记录                    │
│  ┌─────────────────────────┐   │
│  │  今日    +3 条           │   │
│  │  昨日    +5 条           │   │
│  │  前日    +2 条           │   │
│  └─────────────────────────┘   │
└─────────────────────────────────┘
```

**组件规范：**

**1. 打卡卡片（Glass Card）：**
- 圆角：16px
- 内边距：24px
- 背景：毛玻璃效果
- 图标：🔥 火焰图标 Primary 颜色
- 数字字号：48px，字重 700
- 文案字号：14px，Text Secondary

**2. 完成率卡片：**
- 布局：两个卡片并排，间距 16px
- 环形进度条：尺寸 80x80px
- 环形颜色：Primary 填充，Gray-200 背景
- 中心数字：字号 20px，字重 600
- 底部标签：字号 12px

**3. 分类占比饼图：**
- 饼图尺寸：160x160px
- 标签颜色示例：
  - Java: `#3B82F6` (Blue)
  - Spring: `#10B981` (Green)
  - MySQL: `#F59E0B` (Amber)
  - 其他: `#8B5CF6` (Purple)
- 图例：饼图下方，水平排列
- 无数据时：显示空状态

**4. 学习记录列表：**
- 布局：垂直列表
- 每行高度：48px
- 左侧：日期文字
- 右侧：新增数量 badge
- 点击跳转对应日期日历视图

**空状态：**
```
┌─────────────────────────────────┐
│                                 │
│           📊                   │
│                                 │
│      还没有学习数据              │
│                                 │
│   录入学习内容后可见统计哦       │
│                                 │
└─────────────────────────────────┘
```

---

### 3.5 数据导出（新增 F8）

**路由：** `/settings/export`（Modal 页面）

**布局结构：**
```
┌─────────────────────────────────┐
│  ✕ 关闭      数据导出          │ ← 顶部导航
├─────────────────────────────────┤
│                                 │
│  📦 导出格式                    │
│  ┌─────────────────────────┐   │
│  │  ○ JSON                 │   │
│  │    完整数据，含所有字段   │   │
│  │ ─────────────────────── │   │
│  │  ● CSV                  │   │
│  │    表格数据，通用格式     │   │
│  └─────────────────────────┘   │
│                                 │
│  📋 导出内容                    │
│  ┌─────────────────────────┐   │
│  │ ☑ 学习内容               │   │
│  │ ☑ 复习任务               │   │
│  └─────────────────────────┘   │
│                                 │
│  📊 数据预览                    │
│  ┌─────────────────────────┐   │
│  │  学习内容： 25 条        │   │
│  │  复习任务： 125 条      │   │
│  │  (其中已完成: 80 条)    │   │ ← 已完成任务子集
│  └─────────────────────────┘   │
│                                 │
│  ┌─────────────────────────┐   │
│  │     导出数据 📤         │   │ ← 主按钮
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

**组件规范：**

**1. 格式选择：**
- Radio 单选组
- 选中态：Primary 颜色圆点 + 文字 Primary
- 未选中态：Gray-300 圆点 + 文字 Text Secondary

**2. 内容复选框：**
- Checkbox 组
- 默认全选
- 至少选择一项

**3. 数据预览：**
- 卡片形式展示
- 字号 14px
- 数量文字 Primary 颜色加粗

**4. 导出按钮：**
- 主按钮样式（CTA 橙色）
- 点击后显示加载状态
- 导出完成后自动打开系统分享面板

**导出成功 Toast：**
```
✅ 数据导出成功！
已生成 yike_export_20250225.json (125KB)
```

---

### 3.6 设置页（更新）

**变更：** 新增「数据备份与导出」入口

**布局结构：**
```
┌─────────────────────────────────┐
│  ⚙️ 设置                       │
├─────────────────────────────────┤
│                                 │
│  提醒设置                       │
│  ┌─────────────────────────┐   │
│  │ 提醒时间        09:00 > │   │
│  │ 免打扰时段    22:00-08:00>│
│  └─────────────────────────┘   │
│                                 │
│  复习设置                       │
│  ┌─────────────────────────┐   │
│  │ 复习间隔        默认 >   │   │
│  └─────────────────────────┘   │
│                                 │
│  数据                           │
│  ┌─────────────────────────┐   │
│  │ 导出数据           >    │   │ ← 新增入口
│  │ 备份与恢复         >    │   │
│  └─────────────────────────┘   │
│                                 │
│  关于                           │
│  ┌─────────────────────────┐   │
│  │ 版本 1.0.0              │   │
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

---

## 4. 组件库（新增）

### 4.1 日历组件

| 组件 | 规范 |
|------|------|
| **CalendarHeader** | 月份切换，箭头按钮 44x44px |
| **CalendarGrid** | 7x6 网格，单元格 48x48px |
| **CalendarCell** | 日期 + 状态气泡 |
| **TaskDot** | 4x4px 圆点，状态色 |

### 4.2 统计组件

| 组件 | 规范 |
|------|------|
| **StatCard** | Glass Card 封装 |
| **StreakCard** | 打卡天数展示 |
| **RingProgress** | 环形进度条 |
| **PieChart** | 标签分布饼图 |

### 4.3 导出组件

| 组件 | 规范 |
|------|------|
| **FormatSelector** | Radio 单选组 |
| **ContentCheckbox** | Checkbox 复选组 |
| **DataPreview** | 数据量预览卡片 |

---

## 5. 动画规范

### 5.1 页面切换

| 场景 | 时长 | 缓动函数 |
|------|------|----------|
| Tab 切换 | 300ms | ease-in-out |
| Modal 弹出 | 300ms | ease-out |
| 日历月份切换 | 250ms | ease-in-out |

### 5.2 交互动效

| 动效 | 描述 |
|------|------|
| **日期选中** | 缩放 0.95，回弹 150ms |
| **任务完成** | 勾选 ✓ 动画 → 滑动退出 |
| **卡片出现** | 淡入 + 上滑 200ms，stagger 50ms |
| **导出按钮** | 点击缩放 0.95，加载转圈 |

---

## 6. 空状态与异常状态

### 6.1 日历空状态

| 场景 | 插图 | 文案 |
|------|------|------|
| 本月无数据 | 日历图标 | "本月暂无学习记录" |

### 6.2 统计空状态

| 场景 | 插图 | 文案 |
|------|------|------|
| 无学习数据 | 统计图标 | "还没有学习数据" |
| 无标签数据 | 饼图占位 | "还没有标签分类" |

### 6.3 导出异常

| 场景 | 状态 | 操作 |
|------|------|------|
| 导出失败 | Error Toast | "导出失败，请重试" |
| 无数据导出 | 禁用按钮 | 提示"暂无数据可导出" |

---

## 7. 依赖推荐

| 功能 | Flutter 包 | 版本 | 用途 |
|------|-----------|------|------|
| 日历 | `table_calendar` | ^3.0.0 | 日历组件 |
| 图表 | `fl_chart` | ^0.66.0 | 饼图、环形图 |
| 分享 | `share_plus` | ^7.0.0 | 系统分享 |
| 文件 | `path_provider` | ^2.1.0 | 获取文件路径 |

---

## 8. 设计文件

建议使用以下工具产出高保真设计稿：

| 工具 | 用途 |
|------|------|
| **Figma** | 完整 UI 设计稿（推荐） |
| **Excalidraw** | 快速线框图 |

---

*文档版本：v2.0*
*创建日期：2026-02-25*
*基于 Glassmorphism 设计体系，继承 v1.0 视觉规范*
